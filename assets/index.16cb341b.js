import{d as q,s as L,a as v,o as r,c as a,b as i,n as C,t as y,e as $,F as w,r as b,f as g,u as d,w as F,g as N,T as X,h as A,i as p,j as R,k as Y,l as Z,m as I,p as ee,v as se,q as ne,x as te,y as ue}from"./vendor.0c42bb0e.js";const ie=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&u(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(t){if(t.ep)return;t.ep=!0;const l=n(t);fetch(t.href,l)}};ie();const D=q("idioms",{state:()=>({allIdioms:L({}),freqIdioms:L([])}),getters:{isValidIdiom(e){return s=>s in e.allIdioms},randomIdiom(e){return()=>{const s=Math.floor(Math.random()*e.freqIdioms.length);return e.freqIdioms[s]}}},actions:{setAllIdioms(e){this.allIdioms=e},setFreqIdioms(e){this.freqIdioms=e}}}),G=[..."bpmfdtnlgkhjqxzcsr"],M=["zh","ch","sh"],le=[...G,...M],re=["a","o","e","ai","ei","ao","ou","an","en","ang","eng","er","i","ia","ie","iao","iou","ian","in","iang","ing","iong","u","ua","uo","uai","uei","uan","uen","uang","ueng","\xFC","\xFCe","\xFCan","\xFCn","ong"],U=["\u0304","\u0301","\u030C","\u0300"],k=e=>{let s=0;for(let u=0;u<U.length;u++)e.normalize("NFD").includes(U[u])&&(s=u+1);return[e.normalize("NFD").replace(/\u0304|\u0301|\u030C|\u0300/,"").normalize(),s]},V=e=>{switch(e){case"iu":return"iou";case"ui":return"uei";case"un":return"uen";default:return e}},oe=e=>{let[s,n]=k(e);if("jqx".includes(s[0])&&s[1]==="u"&&(s=s.replace("u","\xFC")),s.startsWith("y"))switch(s[1]){case"i":s=s.slice(1);break;case"u":s=`\xFC${s.slice(2)}`;break;default:s=`i${s.slice(1)}`;break}else s.startsWith("w")&&(s=s[1]==="u"?s.slice(1):`u${s.slice(1)}`);return M.includes(s.slice(0,2))?[s.slice(0,2),V(s.slice(2)),n]:G.includes(s.charAt(0))?[s.charAt(0),V(s.slice(1)),n]:["",V(s),n]},z=e=>e.split(" ").map(oe),ae=(e,s)=>e[0]===s[0]&&e[1]===s[1]&&e[2]===s[2];var B;(function(e){e[e.NotExists=0]="NotExists",e[e.Exists=1]="Exists",e[e.CorrectPosition=2]="CorrectPosition"})(B||(B={}));var T;(function(e){e[e.GiveCombination_IfBothEverGuessed=0]="GiveCombination_IfBothEverGuessed",e[e.GiveCombination_IfBothExistsInOneGuess=1]="GiveCombination_IfBothExistsInOneGuess",e[e.GiveTone_IfCombinationCorrect=2]="GiveTone_IfCombinationCorrect",e[e.GiveCharacter_IfPositionToneCorrect=3]="GiveCharacter_IfPositionToneCorrect"})(T||(T={}));const de=q("guess",{state:()=>({answerIdiom:null,guessedIdioms:[],hints:[],enabledHints:[0,2,3]}),getters:{answerOrigPinyin(e){return e.answerIdiom===null?null:D().allIdioms[e.answerIdiom]},answerPinyin(){return this.answerOrigPinyin===null?null:z(this.answerOrigPinyin)},answerPinyinFlatten(){return this.answerPinyin===null?null:this.answerPinyin.flatMap(([e,s])=>[e,s])},answerSyllables(){return this.answerPinyin===null?null:this.answerPinyin.map(([e,s])=>e+s)},compareIdiomPinyin(){return e=>{if(this.answerPinyinFlatten===null||this.answerSyllables===null)throw new Error("answer is not set");return e.map(([s,n],u)=>{const[t,l]=[s,n].map((f,x)=>this.answerPinyin[u][x]===f?2:this.answerPinyinFlatten.includes(f)?1:0),o=this.answerSyllables.includes(s+n);return[t,l,o]})}},guesses(){const e=D();return this.guessedIdioms.map(s=>{const n=e.allIdioms[s],u=z(n);return{idiom:s,pinyin:u,origPinyin:n,result:this.compareIdiomPinyin(u)}})},guessesPinyin(){return this.guesses.map(e=>e.pinyin)},guessesPinyinFlatten(){return this.guessesPinyin.flatMap(e=>e.flatMap(([s,n])=>[s,n]))},guessesSyllables(){return this.guessesPinyin.map(e=>e.map(([s,n])=>s+n))},guessesSyllablesFlatten(){return this.guessesSyllables.flat()},won(){return this.guesses.length!==0&&this.guesses[this.guesses.length-1].result.every(e=>e[0]===2&&e[1]===2)},lost(){return this.guessedIdioms.length>=10&&!this.won},includeList(){return this.answerPinyinFlatten===null?[]:this.answerPinyinFlatten.filter(e=>this.guessesPinyinFlatten.includes(e))},excludeList(){return this.answerPinyinFlatten===null?[]:this.guessesPinyinFlatten.filter(e=>!this.answerPinyinFlatten.includes(e))}},actions:{initAnswerIdiom(e){this.answerIdiom=e},guessIdiom(e){return D().isValidIdiom(e)?(this.guessedIdioms.push(e),this.won||this.updateHints(),!0):!1},updateHints(){if(!this.answerIdiom||!this.answerOrigPinyin)return[];const e=[];for(const[s,n]of this.answerPinyin.entries()){const[u,t]=n,l=u+t,o=this.answerOrigPinyin.split(" ")[s];if(this.enabledHints.includes(3)&&ae(n,this.guesses[this.guesses.length-1].pinyin[s])){e.push(this.answerIdiom.charAt(s));continue}if(this.enabledHints.includes(2)&&this.guessesSyllablesFlatten.includes(l)){e.push(o);continue}if(this.enabledHints.includes(0)&&this.guessesPinyinFlatten.includes(u)&&this.guessesPinyinFlatten.includes(t)){e.push(k(o)[0]);continue}if(this.enabledHints.includes(1)&&this.guessesPinyin.findIndex(f=>{const x=f.flatMap(([_,E])=>[_,E]);return x.includes(u)&&x.includes(t)})!==-1){e.push(k(o)[0]);continue}}this.hints.push(...e.filter(s=>!this.hints.includes(s)))}}}),ce={class:"p-0.5 w-16 h-16"},he={class:"text-sm font-mono font-semibold"},me=i("div",{class:"text-blue-500 text-xs"}," + ",-1),fe={key:1,class:"text-center"},ge={class:"mt-1 text-center"},K=v({props:{char:null,pinyin:null,guessResults:null},setup(e){const s={[B.NotExists]:"gray-500",[B.Exists]:"yellow-500",[B.CorrectPosition]:"green-500"};return(n,u)=>(r(),a("div",ce,[i("div",he,[Array.isArray(e.pinyin)&&e.guessResults?(r(),a("div",{key:0,class:C(["flex justify-center items-baseline decoration-green-500",e.guessResults[2]?["underline"]:[]]),"w:underline":"offset-1 double"},[i("div",{class:C(`text-${s[e.guessResults[0]]}`)},y(e.pinyin[0]||"\xD8"),3),me,i("div",{class:C(`text-${s[e.guessResults[1]]}`)},y(e.pinyin[1]),3)],2)):(r(),a("div",fe,y(e.pinyin),1))]),i("div",ge,y(e.char),1)]))}}),pe={class:"flex justify-center mt-1 first-child:border-l-2 children:border-2 children:border-l-0 children:border-dashed children:border-red-200"},ye=v({props:{idiom:null,pinyin:null,guessResults:null},setup(e){const s=e,n=$(()=>s.pinyin.map((u,t)=>({char:s.idiom.charAt(t),pinyin:u,guessResults:s.guessResults[t]})));return(u,t)=>(r(),a("div",pe,[(r(!0),a(w,null,b(d(n),(l,o)=>(r(),g(K,{key:o,char:l.char,pinyin:l.pinyin,"guess-results":l.guessResults},null,8,["char","pinyin","guess-results"]))),128))]))}});var H=(e,s)=>{const n=e.__vccOpts||e;for(const[u,t]of s)n[u]=t;return n};const we={};function xe(e,s){return r(),g(X,{mode:"out-in","enter-active-class":"duration-400 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-400 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:F(()=>[N(e.$slots,"default")]),_:3})}var j=H(we,[["render",xe]]);const ve={class:"bg-white rounded-lg mx-3 max-w-md p-2","w:border":"t-9 teal-600","w:shadow":"lg gray-500"},S=v({props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:s}){return(n,u)=>(r(),g(j,null,{default:F(()=>[e.modelValue?(r(),a("div",{key:0,class:"fixed w-full h-full flex justify-center items-center z-10","w:bg":"opacity-25 black",onClick:u[0]||(u[0]=t=>s("update:modelValue",!e.modelValue))},[i("div",ve,[N(n.$slots,"default")])])):A("",!0)]),_:3}))}}),be=i("h1",{class:"text-lg text-center mb-2"}," \u5F85\u731C\u6210\u8BED ",-1),Fe={class:"flex justify-center first-child:border-l-2 children:border-2 children:border-l-0 children:border-dashed children:border-red-200"},Ce=v({props:{answer:null,answerPinyin:null},setup(e){const s=e,n=p(!0),u=$(()=>s.answerPinyin.split(" ").map((t,l)=>({char:s.answer.charAt(l),pinyin:t})));return(t,l)=>(r(),g(S,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=o=>n.value=o)},{default:F(()=>[be,i("div",Fe,[(r(!0),a(w,null,b(d(u),(o,f)=>(r(),g(K,{key:f,char:o.char,pinyin:o.pinyin},null,8,["char","pinyin"]))),128))])]),_:1},8,["modelValue"]))}}),_e={class:"flex flex-1 my-2"},Ee=i("div",null,"\u63D0\u793A",-1),Ie=v({props:{hints:null},setup(e){return(s,n)=>(r(),a("div",_e,[Ee,(r(!0),a(w,null,b(e.hints,u=>(r(),a("div",{key:u,class:"rounded-full px-2 m-1 bg-green-500 text-gray-100"},y(u),1))),128))]))}}),Be=i("h1",{class:"text-lg text-center mb-2"}," \u58F0\u6BCD\u8868 ",-1),De={class:"flex flex-wrap max-w-full"},Pe=i("h1",{class:"text-lg text-center mb-2"}," \u97F5\u6BCD\u8868 ",-1),$e={class:"flex flex-wrap max-w-full"},Ae=v({props:{excluded:null,included:null},setup(e){const s=e,n=p(!1),u=t=>s.excluded.includes(t)?"bg-gray-300":s.included.includes(t)?"bg-green-500":"bg-blue-400";return(t,l)=>(r(),g(S,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=o=>n.value=o)},{default:F(()=>[Be,i("div",De,[(r(!0),a(w,null,b([...d(le),""],o=>(r(),a("div",{key:o,class:C(["rounded-full px-2 m-1 text-white font-mono",u(o)])},y(o||"\xD8"),3))),128))]),Pe,i("div",$e,[(r(!0),a(w,null,b(d(re),o=>(r(),a("div",{key:o,class:C(["rounded-full px-2 m-1 text-white",u(o)])},y(o),3))),128))])]),_:1},8,["modelValue"]))}}),ke={},Ve={class:"flex justify-center mt-1 first-child:border-l-2 children:border-2 children:border-l-0 children:border-dashed children:border-red-200"};function je(e,s){return r(),a("div",Ve,[(r(),a(w,null,b(4,n=>i("div",{key:n,class:"p-0.5 w-16 h-16"})),64))])}var Se=H(ke,[["render",je]]);const Oe=i("div",{class:"px-4"},[i("h1",{class:"text-xl text-center mb-2"}," \u5173\u4E8E "),i("p",null,[i("b",null,"\u592A\u957F\u4E0D\u770B\uFF1A"),R(" \u8FD9\u662F\u4E00\u4E2A\u6839\u636E\u58F0\u6BCD\u548C\u97F5\u6BCD\u731C\u6210\u8BED\u7684\u5C0F\u6E38\u620F\u3002\u5FC5\u987B\u8F93\u5165\u4E00\u4E2A\u5408\u6CD5\u7684\u6210\u8BED\u3002 ")]),i("h2",{class:"font-bold text-center my-2"}," \u989C\u8272 "),i("p",null,[R(" \u5982\u679C\u4F60\u731C\u7684\u6210\u8BED\u4E2D\u67D0\u4E00\u4E2A\u58F0\u6BCD\u6216\u97F5\u6BCD\uFF1A "),i("ul",{class:"list-circle list-inside my-1"},[i("li",null,"\u4F4D\u7F6E\u4E0E\u5F85\u731C\u6210\u8BED\u76F8\u540C\uFF0C\u5B83\u5C31\u4F1A\u88AB\u6807\u6210\u7EFF\u8272"),i("li",null,"\u51FA\u73B0\u5728\u5F85\u731C\u6210\u8BED\u4E2D\u4F46\u4F4D\u7F6E\u9519\u8BEF\uFF0C\u5C31\u662F\u9EC4\u8272"),i("li",null,"\u97F5\u6BCD\u7EC4\u5408\u6B63\u786E\uFF0C\u4F1A\u52A0\u4E0A\u7EFF\u8272\u53CC\u4E0B\u5212\u7EBF"),i("li",null,"\u538B\u6839\u6CA1\u51FA\u73B0\u5728\u5F85\u731C\u6210\u8BED\u4E2D\uFF0C\u5C31\u662F\u7070\u8272")])]),i("p",null,"\u5728\u4E0B\u65B9\u7684\u8F93\u5165\u6846\u4E2D\u8F93\u5165\u4EFB\u610F\u4E00\u4E2A\u56DB\u5B57\u6210\u8BED\u5F00\u59CB\u6E38\u620F\u3002")],-1),qe=v({setup(e){const s=p(!0);return(n,u)=>(r(),g(S,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=t=>s.value=t)},{default:F(()=>[Oe]),_:1},8,["modelValue"]))}});var Le="https://cdn.jsdelivr.net/gh/AllanChain/chinese-wordle@gh-pages/assets/all-idioms.cbecdf8f.json",Ne="https://cdn.jsdelivr.net/gh/AllanChain/chinese-wordle@gh-pages/assets/freq-idioms.8d5d143d.json";const Re={class:"p-4 mx-auto max-w-2xl"},Ge={class:"flex","w:border":"b-1 solid gray-300","w:p":"b-2"},Me=i("h1",{class:"flex-1","w:text":"3xl center blue-900"}," \u62FC\u6210\u8BED ",-1),Ue={class:"flex"},ze={class:"grid grid-cols-1 sm:grid-cols-2"},Te=i("div",{class:"h-10"},null,-1),Ke={class:"fixed bottom-2 left-1/2 transform -translate-x-1/2"},He={key:0,class:"px-2 py-1 rounded-md bg-red-500 text-white"},We={key:0,class:"flex justify-center mt-3"},Je=["disabled","onKeyup"],Qe=["disabled"],Xe={key:1,class:"flex"},Ye=v({setup(e){const s=D(),n=de(),u=p(""),t=p(""),l=p(null),o=p(localStorage.getItem("played-wordle")!=="true"),f=p(!1),x=p(!1),_=p(!1),E=$(()=>_.value||n.lost||n.won);Y(()=>n.lost,()=>{n.lost&&(f.value=!0)},{immediate:!1}),Z(()=>localStorage.setItem("played-wordle","true"));const J=()=>{n.$reset(),n.initAnswerIdiom(s.randomIdiom()),_.value=!1},P=h=>{l.value!==null&&clearTimeout(l.value),t.value=h,l.value=window.setTimeout(()=>{t.value="",l.value=null},3e3)},O=()=>{n.guessIdiom(u.value)||P("\u8FD9\u4E2A\u6210\u8BED\u4E0D\u5728\u6211\u4EEC\u7684\u8BCD\u5E93\u91CC..."),u.value=""};return fetch(Ne).then(h=>h.json()).then(h=>{s.setFreqIdioms(h),n.initAnswerIdiom(s.randomIdiom())}).catch(h=>P(`\u65E0\u6CD5\u83B7\u53D6\u6570\u636E\uFF0C\u8BF7\u5237\u65B0
${h.message.slice(0,50)}`)),fetch(Le).then(h=>h.json()).then(h=>s.setAllIdioms(h)).catch(h=>P(`\u65E0\u6CD5\u83B7\u53D6\u6570\u636E\uFF0C\u8BF7\u5237\u65B0
${h.message.slice(0,50)}`)),(h,m)=>(r(),a(w,null,[I(qe,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=c=>o.value=c)},null,8,["modelValue"]),d(n).answerIdiom&&d(n).answerOrigPinyin?(r(),g(Ce,{key:0,modelValue:f.value,"onUpdate:modelValue":m[1]||(m[1]=c=>f.value=c),answer:d(n).answerIdiom,"answer-pinyin":d(n).answerOrigPinyin},null,8,["modelValue","answer","answer-pinyin"])):A("",!0),I(Ae,{modelValue:x.value,"onUpdate:modelValue":m[2]||(m[2]=c=>x.value=c),excluded:d(n).excludeList,included:d(n).includeList},null,8,["modelValue","excluded","included"]),i("div",Re,[i("div",Ge,[i("button",{class:"bg-red-400 text-white rounded-md px-2 py-1",onClick:m[3]||(m[3]=c=>(f.value=!0,_.value=!0))}," \u653E\u5F03 "),Me,i("button",{class:"bg-emerald-200 rounded-md px-2 py-1",onClick:m[4]||(m[4]=c=>o.value=!0)}," \u5173\u4E8E ")]),i("div",Ue,[I(Ie,{hints:d(n).hints},null,8,["hints"]),i("button",{class:"bg-teal-500 text-white rounded-md px-2 my-1",onClick:m[5]||(m[5]=c=>x.value=!0)}," \u67E5\u770B\u6392\u9664 ")]),i("div",ze,[(r(!0),a(w,null,b(d(n).guesses,(c,Q)=>(r(),g(ye,{key:Q,idiom:c.idiom,pinyin:c.pinyin,"guess-results":c.result},null,8,["idiom","pinyin","guess-results"]))),128)),(r(!0),a(w,null,b(10-d(n).guesses.length,c=>(r(),g(Se,{key:c}))),128))]),Te,i("div",Ke,[I(j,null,{default:F(()=>[t.value?(r(),a("div",He,y(t.value),1)):A("",!0)]),_:1}),I(j,null,{default:F(()=>[d(E)?(r(),a("div",Xe,[i("div",{class:C(["flex rounded-l px-2 w-32 bg-gray-100 items-center justify-center",d(n).won?"bg-green-100 text-green-900":"bg-red-100 text-red-900"])},[i("div",null,y(d(n).won?"\u606D\u559C\u4F60":"\u5F88\u9057\u61BE"),1)],2),i("button",{class:"rounded-r w-18","w:p":"x-4 y-2","w:bg":"indigo-500 hover:indigo-600 active:indigo-700","w:text":"white",onClick:J}," \u91CD\u5F00 ")])):(r(),a("div",We,[ee(i("input",{"onUpdate:modelValue":m[6]||(m[6]=c=>u.value=c),maxlength:"4",disabled:d(E),class:"rounded-l px-2 w-32","w:border":"1 solid gray-300","w:focus":"ring ring-blue-400 border-blue-400","w:disabled":"bg-gray-100",onKeyup:ne(O,["enter"])},null,40,Je),[[se,u.value]]),i("button",{class:"rounded-r w-18",disabled:d(E),"w:p":"x-4 y-2","w:bg":"blue-500 hover:blue-600 active:blue-700 disabled:blue-gray-400","w:text":"white",onClick:O}," \u786E\u8BA4 ",8,Qe)]))]),_:1})])])],64))}});const W=te(Ye);W.use(ue());W.mount("#app");
